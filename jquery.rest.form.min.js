/*!
 jquery rest form plugin
 =======================

 ## About
 jQuery Form PluginをRESTfulなURLに対応させるためのラッパープラグインです。

 ## jQuery Form Plugin
 http://malsup.com/jquery/form/

 ## Required
 * jQuery(Recommende higher version)
 * jQuery Form Plugin

 ## Usage
 urlに[:(param_name)]と入れると該当パラメータに置換します。
 ex: /user/:user_name -> /user/hoge

 ## License
 licensed under MIT
 */
(function(n){"use strict";var t=/:((?:\w)+)/g,i=function(t){if(t==null)return t;if(n.isPlainObject(t))return JSON.stringify(t);if(/^\{.+\}$/.test(t))return t;var i=/^(.+)=(.+)$/,r=t.split("&").reduce(function(t,r){var f=i.exec(r),e,u;return f==null?t:(e=decodeURIComponent(f[1]),u=decodeURIComponent(f[2]),n.isNumeric(u)&&(u=parseInt(u,10)),t[e]=u,t)},{});return JSON.stringify(r)};n.fn.restForm=function(t){this.ajaxFormUnbind().on("submit.form-plugin",function(i){i.isDefaultPrevented()||(i.preventDefault(),n(this).restSubmit(t))})},n.fn.restSubmit=function(r){var e=this,u=n(e),f=r.url||u.attr("action"),o=n.extend({},r,{url:f.replace(t,function(n,t){var r=t,i=u.formToArray().filter(function(n){return n.name===r})[0];return i==null?n:i.value}),beforeSubmit:function(i){var o=f.match(t),s;if(o!=null)return(s=o.map(function(n){return n.replace(t,"$1")}),i.filter(function(n){return s.indexOf(n.name)>-1}).forEach(function(n){var t=i.indexOf(n);i.splice(t,1)}),n.isFunction(r.beforeSubmit)===!1)?void 0:r.beforeSubmit.apply(this,arguments)},beforeSend:function(t,u){if(u.type!=="GET"&&u.contentType==="application/json"&&u.data!=null&&(u.data=i(u.data)),n.isFunction(r.beforeSend)!==!1)return r.beforeSend.apply(this,arguments)},success:function(){u.trigger("success",arguments),n.isFunction(r.success)&&r.success.apply(this,arguments)},error:function(){u.trigger("error",arguments),n.isFunction(r.error)&&r.error.apply(this,arguments)},complete:function(){u.trigger("complete",arguments),n.isFunction(r.complete)&&r.complete.apply(this,arguments)}});n(this).ajaxSubmit(o)}})(jQuery)